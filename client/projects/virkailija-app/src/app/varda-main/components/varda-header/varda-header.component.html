<ng-container *ngIf="!virkailijaRaamit">
  <div id="virkailija-raamit-filleri"></div>
</ng-container>
<nav *ngIf="isAuthenticated()"
     class="navbar navbar-expand-md navbar-light bg-light varda-navbar"
     appHighContrast>
  <div class="navbar-brand varda-navbar-toimija"
       *ngIf="vakajarjestajat && vakajarjestajat.length">
    <span id="siteTitle"
          class="d-none d-lg-inline">{{"label.toimija" | translate}}:</span>
    <ng-container *ngIf="vakajarjestajat">
      <app-varda-dropdown-filter [filterBy]="['nimi', 'organisaatio_oid', 'y_tunnus']"
                                 [label]="selectedVakajarjestaja?.nimi"
                                 [attr.aria-label]="'label.oma-organisaatio' | translate"
                                 (select)="changeVakajarjestaja($event)"
                                 [list]="vakajarjestajat">
      </app-varda-dropdown-filter>
    </ng-container>
  </div>
  <button class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation">
    <span class="navbar-toggler-text">{{"label.menu" | translate }}</span>
    <mat-icon>expand_more</mat-icon>
  </button>

  <div *ngIf="toimipaikkaAccessIfAnyToimipaikka"
       class="collapse navbar-collapse varda-navbar-links"
       id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto"
        *ngIf="vakajarjestajat">
      <ng-container *ngIf="!tilapainenHenkilostoOnlyBoolean">
        <li class="varda-header-nav-item-container"
            [class.active-nav-item]="activeNavItem === 'syota-tietoja'">
          <a [routerLink]="['/']">
            {{"label.navi.syotto" | translate}}</a>
        </li>

        <li class="varda-header-nav-item-container"
            [class.active-nav-item]="activeNavItem === 'tietojen-katselu'">
          <a [routerLink]="['/tietojen-katselu']">
            {{"label.navi.tietojen-katselu" | translate}}</a>
        </li>

        <li class="varda-header-nav-item-container divider">
          <span class="d-none d-md-block"> | </span>
        </li>
      </ng-container>

      <li class="varda-header-nav-item-container"
          [matMenuTriggerFor]="menu"
          #trigger="matMenuTrigger"
          [class.active-nav-item]=" activeNavItem === 'vakatoimija'">
        <button class="varda-text-button">
          <span>{{ "label.varhaiskasvatustoimija" | translate }}</span>
          <mat-icon *ngIf="!trigger.menuOpen; else arrowUp">arrow_drop_down</mat-icon>
          <ng-template #arrowUp>
            <mat-icon>arrow_drop_up</mat-icon>
          </ng-template>
        </button>

        <mat-menu #menu="matMenu">
          <a [routerLink]="['/vakatoimija']"
             (keydown.tab)="$event.stopPropagation()"
             (keydown.shift.tab)="$event.stopPropagation()"
             mat-menu-item>
            {{ "label.yhteystiedot" | translate }}
          </a>
          <a [routerLink]="['/paos-hallinta']"
             *ngIf="!tilapainenHenkilostoOnlyBoolean"
             (keydown.tab)="$event.stopPropagation()"
             (keydown.shift.tab)="$event.stopPropagation()"
             mat-menu-item>
            {{ "label.paostoiminta" | translate }}
          </a>
          <a *ngIf="toimipaikkaAccessIfAnyToimipaikka.tilapainenHenkilosto.katselija"
             [routerLink]="['/tilapainen-henkilosto']"
             (keydown.tab)="$event.stopPropagation()"
             (keydown.shift.tab)="$event.stopPropagation()"
             mat-menu-item>
            {{ "label.tilapainen-henkilosto" | translate }}
          </a>
        </mat-menu>
      </li>
      <li class="varda-header-nav-item-container">
        <a [href]="'ohjeet.url.confluence' | translate"
           target="_vardaGuides">
          {{"label.ohjeet" | translate}}</a>
      </li>
    </ul>
  </div>
</nav>
